# Postfix Integration

This is a community developed integration designed to parse logs from [Postfix mail servers](https://www.postfix.org/). The plug-in supports 

## Compatibility
The `log` ingestion pipeline was tested with logs from Postfix version 3.8.6 running on Ubuntu 24. 

Currently this integration supports parsing logs from the Postfix anvil, cleanup, error, local, master, pickup, postfix-script, qmgr, scache, smtp, and smtpd processes with additional support for [OpenDKIM](http://www.opendkim.org/) and [policyd-spf](https://manpages.debian.org/testing/postfix-policyd-spf-python/policyd-spf.1.en.html).  All other events are dropped.

**Exported fields**
| Field | Description | Type |
|---|---|---|
| @timestamp | Date/time when the event originated. This is the date/time extracted from the event, typically representing when the event was generated by the source. If the event source has no original timestamp, this value is typically populated by the first time the event was received by the pipeline. Required field for all events. | date |
| client.address | Some event client addresses are defined ambiguously, as the event may list an IP address, a domain, or a Unix socket. This field contains the raw address. The `client.ip` or `client.domain` field contains the appropriate values based on whether this field contains an IP address or a hostname, respectively. | keyword |
| client.as.number | Unique number allocated to the autonomous system. The autonomous system number (ASN) uniquely identifies each network on the Internet. | long |
| client.as.organization.name | Organization name. | keyword |
| client.domain | The domain name of the client system. <br/><br/>This value may be a host name, a fully qualified domain name, or another host naming format. | keyword |
| client.geo.city_name | City name. | keyword |
| client.geo.continent_code | Two-letter code representing continent’s name. | keyword |
| client.geo.continent_name | Name of the continent. | keyword |
| client.geo.country_iso_code | Country ISO code. | keyword |
| client.geo.country_name | Country name. | keyword |
| client.geo.location | Latitude and Longitude. | geo_point |
| client.geo.region_iso_code | Region ISO code. | keyword |
| client.geo.region_name | Region name. | keyword |
| client.ip | IP address of the client (IPv4 or IPv6). | ip |
| client.registered_domain | The highest registered client domain, stripped of the subdomain.<br/><br/>For example, the registered domain for "foo.example.com" is "example.com". | keyword |
| client.subdomain | The subdomain portion of a fully qualified domain name includes all of the names except the host name under the registered_domain. In a partially qualified domain, or if the the qualification level of the full name cannot be determined, subdomain contains all of the names below the registered domain.<br/><br/>For example the subdomain portion of "www.east.mydomain.co.uk" is "east". If the domain has multiple levels of subdomain, such as "sub2.sub1.example.com", the subdomain field will contain "sub2.sub1", with no trailing period.
| client.top_level_domain | The effective top level domain (eTLD), also known as the domain suffix, is the last part of the domain name. For example, the top level domain for example.com is "com". | keyword |
| ecs.version | ECS version this event conforms to.<br/><br/>When querying across multiple indices — which may conform to slightly different ECS versions — this field lets integrations adjust to the schema version of the events. | keyword |
| email.direction | Not yet implemented. | keyword |
| email.from.address | The email address of the sender. | keyword |
| email.local_id | Unique identifier given to the email by the source that created the event.<br/><br/> Identifier is not persistent across hops. | keyword |
| email.message_id | Identifier from the RFC 5322 `Message-ID:` email header that refers to a particular email message. | wildcard |
| email.to.address | The email address of the recipient.<br/><br/>**Note:** If one or more recipients of an email are aliases, this field will contain the address of the non-alias/resolved email address.  The address of the orginal `email.to.address` alias is stored in `email.to.original_address`. | keyword |
| ##########LEFT OFF HERE############### |
| data_stream.dataset | Data stream dataset name.<br/> `postfix.log` | constant_keyword |
| data_stream.type | Data stream type.<br/> `logs` | constant_keyword |
| data_stream.namespace | A user defined namespace. Namespaces are useful to allow grouping of data. <br/><br/> Many users already organize their indices this way, and the data stream naming scheme now provides this best practice as a default. Many users will populate this field with `default`. If no value is used, it falls back to `default`.<br/><br/>Beyond the Elasticsearch index naming criteria noted above, namespace value has the additional restrictions:<br/><br/><ul><li>Must not contain -</li><li>No longer than 100 characters</li></ul> | constant_keyword |
| event.dataset | Name of the dataset.<br/>`postfix.log` | constant_keyword |
| input.type| Type of Filebeat input.<br/>`filestream`| keyword |
| log.file.path | Full path to the log file this event came from, including the file name. | keyword |
